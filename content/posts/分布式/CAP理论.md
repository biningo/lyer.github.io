---
title: CAP理论
date: 2021-07-16
categories: [分布式]
tags: [分布式,CAP]
draft: true
---

## CAP理论

- `Consistency`  数据一致性，多个副本写入之后再读取数据都是一致的，都是更新之后的最新值
- `Availability`  高可用性，集群中的多个节点如果其中有几个节点挂了则还可以继续响应
- `Partition-tolerance`  分区容错性，集群的节点之间如果出现网络中断则会出现多个分区，多个分区之间不能通讯

三者之间不能同时满足，因为如果允许出现网络分区(网络断开产生分区而无法连通)则多个节点之间的数据还要保持一致性并且还要能高可用提供给用户访问，这是不可能的

分布式系统中P是一定会出现的，如果没有P则代表 **不允许出现网络分区**，也就是说保证网络必须连通不能中断这是不可能的。如果能保证网络不出现分区则代表这个不是一个分布式系统，而是一个单体架构

由于不出现网络分区往往不是分布式系统，分布式系统就一定会出现网络分区`P`，所以分布式理论中只需要追求 `CP`或则`AP`即可

​      

## BASE理论

TODO

​    

## AP和CP

`AP` 为了保障服务的高可用，牺牲数据一致性，只保障数据的最终一致性

`CP` 保持数据的一致性，牺牲高可用，如果数据没有达到一致性则不能对外提供服务

​    

## AP的场景和开源组件

AP场景

1. 服务注册中心 

2. 社交平台点赞数、评论数等

AP的开源组件

​    

## CP的场景和开源组件

CP场景

- 金融领域

- 商品抢购，不允许超卖

CP开源组件

- etcd
- zookeeper







