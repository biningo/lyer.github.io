---
title: 文本处理常用命令
date: 2021-08-26
categories: [Linux]
tags: [Linux]
draft: true 
---

## grep

```bash
grep -v "abc"  #-v 表示不包含 反向搜索
grep -n "abc" #显示所在的行号
grep -i #不区分大小写
grep -c #只显示匹配行数 不是匹配的个数
grep -o #只输出匹配内容
grep -w #只匹配完整的单词 默认是匹配所有只要包含了的
grep -vE "^$|#" #-E表示使用egrep支持各种扩展 这里的意思是过滤掉空行或则带#的行
```

## sed

流编辑器，文本过滤、增删查改

```bash
sed "1a 你好世界" a.txt #在第1行后面追加一行“你好世界” a表示append
sed "2i 你好世界" a.txt #在第2行前面插入一行 i表示insert
sed "1d" a.txt #删除第1行 d表示删除
sed "1,3d" a.txt #删除[1,3]行
sed -n "1,3p" a #只显示[1,3]行

sed "s/hello/hi/g" a #将hello全部替换为hi  g表示全局 s表示替换 /是分隔符,用#也可
```

## awk

文本格式化输出的一个工具

```bash
awk 'NR==2' a.txt #显示第2行
awk 'NR==1,NR==3' a.txt #显示 [1,3]行
awk '{print NR,$0}' a.txt #显示行号以及内容 中间必须使用逗号
awk 'NR==2,NR==3  {print NR,$0}' a.txt
#-F指定分隔符 NF表示最后一列下标 显示第1,3,以及最后一列
awk -F ':' '{print NF,$1,$3,$NF}' a.txt
```

## cat

用于输出文件的内容，可以同时输出多个文件

1. 在终端上输入文本到文件

```bash
cat >a.txt<<EOF #EOF可以是其他符号 代表结束开始的符号
hello,world
hello,world
EOF
```

2. cat常用命令

```bash
cat -n a.txt #输出带行号
cat -b a.txt #输出行号(忽略空行)
cat -s a.txt #将连续的空行合并为1行
```

3. cat常用技巧

```bash
cat a.txt b.txt > c.out #合并文件
cat /dev/null > c.out #清空文件
cat > a.txt #键盘输入到文件 ctrl+c结束
cat a.sh | grep -v ^$ #删除空行 
cat -b a.sh | grep -v ^$ #删除空行 同时打印行号
```

## wc

```bash
wc -l #行数
wc -c #字节数量 空格也算1字节
wc -w #统计单词数
```

统计一个文件的空行，统计一个文件非空行

```bash
cat momo.txt | grep  "^$" | wc -l #空行数量
cat momo.txt | grep -v "^$" | wc -l #非空行数量
```

## sort

常用命令

```bash
sort -n #按ASCII底层的数字排序 而不是ascii
sort -r #倒序 (默认升序)
sort -u #去除重复的行
sort -t ',' -k2 #指定分割符号和按哪一列排序
sort -f #不区分大小写
sort -k <n> #从第n列开始排序
sort -o <new-file> #将结果写入文件中 默认直接输出
```

案例

```bash
sort id.txt #默认按照逐个比较ascii排序
sort a.txt b.txt > out.txt #同时排序并合并
sort -k2 -n  id.txt #不指定t则默认是以空格为分隔符
sort -t ':' -k2 -n  id.txt
```

## uniq

去除重复的行，前提是重复的行都是连续的，配合sort使用

```bash
uniq -c #去除重复的行同时在每行开头记录重复的次数
uniq -d #只显示重复的行
uniq -u #只显示不重复的行
uniq -c id.txt | sort -nk1 #和sort配合 按重复行排序
```

## head和tail

用于查看文件的前面/后面内容

```bash
head -n 2 a.txt #输出前2行
head -c 10 a.txt #输出前10字节
head -n 2 a.txt b.txt c.txt #输出每个文件的前2行 -q可以不输出文件名
```

## tee

多重定向

```bash
 ls |tee a.txt # ls > a效果一样
 ls | tee -a a.txt #追加
```

## echo

输出文本

```bash
echo -n "hello,world" # -n表示不会换行 (默认都会换行)
echo -e "hello \t world" # -e表示会转义 (默认不转义,原模原样输出)
```

## diff和vimdiff

```bash
diff -y a b #以并列显示两个文件的区别
diff -c a b #另一种方式显示不同
vimdiff a b
```

## split

分割文件

```bash
#2行分割为一个文件 新文件以new_开头 默认使用ascii字符后缀 -d可以指定使用数字后缀
split -l 2 a.txt new_ -d
split -b 500K a.txt new_ #按照大小进行分割
```

如果要将分割出来的文件合并的话则可以使用`cat`命令输出合并到一个新的文件中

```bash
cat new_* > b.txt
```

## paste

合并多个文件，默认是横向合并: 每个文件的行合并为1行

```bash
paste a b
```

### cut

分割文本

```bash
-d #定义分割符  默认是空格
-f #指定显示的列
-c #以字符为单位切割
-b #字节为单位切割
```

```bash
cut -d ' ' -f 1 #以空格为单位 并取第一列
cut -d ' ' -f 1,4 #以空格为单位 并取第1,4两列
cut -b 1 #取第1字节列
cut -b 1,4 #取1,4字节列
cut -b 1-4 #[1,4] 取范围
cut -b -4 #[1,4] 取范围
cut -b 1-6,7-10 #[1,6] [7,10] 多个范围合并的列
```

## iconv

转化文本的字符串

```bash
iconv -l #列出系统支持的编码
iconv -f <原文件编码> -t <目标编码> abc.txt #将文件转化编码
```

## tr

替换、删除文本

```bash
tr '[a-z]' '[A-Z]' < a.txt #重定向是规定写法 这里的意思是小写全部转化为大写 输出到标准输出
tr '[0-9]' '[a-z]' <a.txt
tr -d 'hello' < a.txt #删除每个hello单词 同时还会删除文本里面含有hello中任意一个字符
tr -d '\n\t' <a.txt #删除换行、制表符
```

## rev

反向输出

```bash
echo 'abcdefg' | rev
```
