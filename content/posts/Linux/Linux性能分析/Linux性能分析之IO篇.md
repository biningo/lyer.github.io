---
title: Linux性能分析之IO篇
date: 2021-09-01
categories: [Linux]
tags: [Linux]
draft: true  
---

## 什么是IO

IO的全称为`input/output` 也就是输入/输出

对于一台计算机来说CPU、内存等设备是属于计算机的核心部分，当计算机(CPU，内存)与其他设备做数据交流的时候就可以叫`IO` ，其他设备可以是硬盘、鼠标、网卡、屏幕等

以硬盘为例，CPU要把数据保存到硬盘，数据流向是 计算机->硬盘，这个动作就可以称为`output`。CPU要从硬盘里面读取数据到内存，数据流向是 硬盘->计算机，这个动作就可以称为`input`

还比如说键盘，我们敲击了某个键，键盘控制器就会转化为相关的电信号然后将相关的动作传递给CPU，这样就发生了`input`。然后CPU作计算处理之后又将处理好的电信号传递给了屏幕显示信号，这个过程就发生了`output`

对于用户进程来说并没有IO的过程，用户进程需要的IO操作都会依赖操作系统的系统调用去完成。比如用户进程需要往磁盘里写数据于是发起了IO调用，操作系统就会替用户进程去执行相关的IO动作，具体的步骤如下:

1. 进程发起IO系统调用
2. 操作系统执行IO动作，将外部数据加载到内核内存缓冲区
3. 操作系统继续将内核缓冲区的数据copy到用户进程的内存空间中
4. 系统调用回到用户进程，然后用户进程就可以读取数据了

​     

## IO分析常用命令

磁盘统计和操作命令

|      |                                  |
| ---- | -------------------------------- |
| gdu  | go语言开发磁盘大小分析器         |
| df   | 统计挂载的文件系统整体的磁盘暂用 |
| du   | 统计目录和文件的大小             |
| dd   |                                  |

| 命令    | desc                                         |
| ------- | -------------------------------------------- |
| iostat  |                                              |
| pidstat | 主要用于监控进程的参数包括 CPU，IO，内存等等 |
| iotop   |                                              |
| vmstat  | 万金油工具                                   |

​    

## 巨人肩膀

[程序员应该这样理解IO](https://www.jianshu.com/p/fa7bdc4f3de7)

