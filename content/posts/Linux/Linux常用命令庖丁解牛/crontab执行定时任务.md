---
title: crontab命令执行定时任务
date: 2021-08-29
categories: [Linux]
tags: [Linux]
---

## crontab概述

`crontab`用来在Linux下执行定时任务的工具，Linux下定时任务主要分为系统任务和用户自定义任务两大类

1. 系统执行的工作：系统周期性所要执行的工作，如备份系统数据、清理缓存

2. 个人执行的工作：某个用户定期要做的工作，例如每隔10分钟检查邮件服务器是否有新信，这些工作可由每个用户自行设置

​    

## crontab基本用法

使用之前我们需要设置一个crontab配置文件的默认编辑器

```bash
export EDITOR="vim"
```

然后我们可以使用如下命令编辑crontab配置文件，设置定时任务

```bash
crontab -e #打开当前用户的配置文件进行编辑
sudo crontab -u test -e #指定用户
```

配置文件里的写法就是先写cron时间表达式，然后再追加需要执行的任务

```bash
* * * * * echo "hello,world" >> /temp/log
```

我们查看配置文件的定时任务可以使用如下命令查看

```bash
crontab -l
```

可以使用如下命令删除配置文件所有的定时任务

```bash
crontab -r
```

​    

## cron时间表达式

```bash
*    *    *    *    *
|    |    |    |    |
|    |    |    |    +----- 星期中星期几 (0 - 6) (星期天 为0)
|    |    |    +---------- 月份 (1 - 12) 
|    |    +--------------- 一个月中的第几天 (1 - 31)
|    +-------------------- 小时 (0 - 23)
+------------------------- 分钟 (0 - 59)
```

`*` 代表整个时间段

`0/12`(分钟位置) 代表每12分钟就执行一次，0表示从第0分钟开始

`2/12`(分钟位置)  代表从第2分钟开始，每12分钟就只执行一次

下面是一些cron时间表达式的案例

```bash
* * * * *  #每分钟执行一次
0/15 * * * #每隔15分钟执行一次
30 * * * * #每小时的第30分钟执行一次 (半小时一次)
0 6 * * * #每天6点执行一次
30 6 * * * #每天6:30执行一次
```

​     

## 巨人肩膀

[crontab 定时任务](https://linuxtools-rst.readthedocs.io/zh_CN/latest/tool/crontab.html)

